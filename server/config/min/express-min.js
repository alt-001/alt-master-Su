var express=require("express"),stylus=require("stylus"),passport=require("passport");module.exports=function(e,s){function r(e,s){return stylus(e).set("filename",s)}console.log(s.rootPath),e.configure(function(){e.set("port",process.env.PORT||3e3),e.set("views",s.rootPath+"/public/views"),e.set("view engine","jade"),e.use(express.favicon()),e.use(express.logger("dev")),e.use(express.cookieParser()),e.use(express.bodyParser()),e.use(express.methodOverride()),e.use(function(e,s,r){s.set("X-Powered-By","ALT"),r()}),e.use(stylus.middleware({src:s.rootPath+"/public",compile:r})),e.use(express.static(s.rootPath+"/public")),e.use(express.session({secret:"alt"})),e.use(passport.initialize()),e.use(passport.session())}),"development"==e.get("env")&&e.use(express.errorHandler())};